# Minimal configuration file.
# TODO:
#  - Define a nice (verbose) behaviour for failed checks
#  - Check for different audio drivers.
#  - Include command line options for
#      * sound driver choice.

AC_INIT(../src/Base/DynamicType.hxx)

AC_SUBST(XERCESC_LIB_PATH)
AC_SUBST(XERCESC_LIBS)
AC_SUBST(XERCESCROOT)
AC_SUBST(XERCESC_INCLUDES)

AC_SUBST(FLTK_LIB_PATH)
AC_SUBST(FLTK_LIBS)
AC_SUBST(FLTK_INCLUDES)
AC_SUBST(FLAG_FLTK_INCLUDES)
AC_SUBST(FLAG_FLTK_LIBS)

AC_SUBST(QT_LIB_PATH)
AC_SUBST(QT_LIBS)
AC_SUBST(QT_INCLUDES)

AC_SUBST(FFTW_LIBS)
AC_SUBST(FFTW_LIB_PATH)
AC_SUBST(FFTW_INCLUDES)

AC_SUBST(OPTFLAGS)
AC_SUBST(DATATYPE)

AC_SUBST(DEFINE_CLAM_DOUBLE)
AC_SUBST(DEFINE_HAVE_FFTW)
AC_SUBST(DEFINE_HAVE_FLTK)
AC_SUBST(DEFINE_HAVE_QT)
AC_SUBST(DEFINE_HAVE_STANDARD_SSTREAM)
AC_SUBST(DEFINE_HAVE_STANDARD_SSTREAM_STR)
AC_SUBST(DEFINE_HAVE_STANDARD_VECTOR_AT)
AC_SUBST(DEFINE_HAVE_STRSTREAM_SSTREAM)
AC_SUBST(DEFINE_CLAM_HAVE_PTHREADS)
AC_SUBST(DEFINE_HAVE_XERCESC)

# Check external C libraries

AC_PROG_CC

CLAM_LIB_FFTW

# Check external C++ libraries

AC_PROG_CXX
AC_LANG_CPLUSPLUS

CLAM_CHECK_CXX
CLAM_LIB_FLTK
CLAM_LIB_QT

AC_ARG_ENABLE(xml,[  --disable-xml           do check for XML support],
   [
	if test $enableval = no; then
		XERCESC_LIB_PATH=
		XERCESC_LIBS=
		XERCESCROOT=
		XERCESC_INCLUDES=
		DEFINE_CLAM_USE_XML=
	else
		CLAM_LIB_XERCESC
	fi
   ],
   [
		CLAM_LIB_XERCESC
   ]
)

CLAM_CHECK_LIBCXX_FEATURES


# Should we check for this?
DEFINE_CLAM_HAVE_PTHREADS=CLAM_HAVE_PTHREADS

AC_OUTPUT(system-linux.cfg)
AC_OUTPUT(system-macosx.cfg)
