#####################################################################
# Default test, to test $$feature
#
# source: $$filename 
#####################################################################
if test x$enabled_$$feature = xyes
    then
    if test x$found_$$feature_esc = xyes
	then
	old_CXXFLAGS=$CXXFLAGS
	old_LDFLAGS=$LDFLAGS
	for tmp in $include_dirs_$$feature_esc
	  do
	  CXXFLAGS="$CXXFLAGS -I$tmp"
	done
	for tmp in $lib_dirs_$$feature_esc
	  do
	  LDFLAGS="$LDFLAGS -L$tmp"
	done
	for tmp in $libs_$$feature_esc
	  do
	  LDFLAGS="$LDFLAGS -l$tmp"
	done
	AC_MSG_CHECKING([compiling, linking and running with $$feature])
	AC_RUN_IFELSE(
	    [
		AC_LANG_SOURCE(
		    [[
			    $$source{$$feature}
			    ]])	
		],[
		AC_MSG_RESULT(ok)
		],[
		AC_MSG_RESULT(failed)
		AC_MSG_FAILURE([$$feature failed])
	    ]
	)
	CXXFLAGS=$old_CXXFLAGS
	LDFLAGS=$old_LDFLAGS
    fi
fi
#####################################################################

