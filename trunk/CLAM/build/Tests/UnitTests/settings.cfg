TOP = ../../..

PROGRAM = UnitTests

# This line includes default values for the variables below
include $(TOP)/build/defaults.cfg

# whether to use double (1) or float (0) for TData
CLAM_DOUBLE = 0

# whether to compile XML dependant code, and link agains Xerces
CLAM_USE_XML = 1

# whether to disable all the CLAM checks, both debug and normal
#CLAM_DISABLE_CHECKS = 0

# whether to simulate release checks being in debug mode
#CLAM_USE_RELEASE_ASSERTS = 0

# external library dependency indicators

USE_ALSA = $(HAS_ALSA)
USE_FFTW = 1
#USE_FLTK = 0
USE_QT = 0
#USE_DIRECTX = 0
#USE_PORTAUDIO = 0
#USE_PORTMIDI = 0
#USE_RTAUDIO = 0
USE_PTHREADS = 1
USE_CPPUNIT = 1 
USE_MAD = 1
USE_ID3 = 1
USE_SNDFILE = 1
USE_OGGVORBIS = 1
USE_XERCES = 1
USE_XMLPP = 1

PRJ_SEARCH_INCLUDES = \
	$(TOP)/draft/Cuidado/ported \

PRJ_SEARCH_RECURSE_INCLUDES = \
	$(TOP)/test/UnitTests \

include $(TOP)/build/system.cfg

# for avoiding the nasty bug of Factories being instantiated more than once over the same
# memory address
INLINE_VC6_FIX_FLAGS_RELEASE = \
	/nologo /MD /W3 /GR /GX /O2 /Ob0 /FD /c /Zm1000

# for avoiding the possible bug in gcc-3.2.2 (RedHat patch) code optimizer and usage of
# fomit-frame-pointer

CXXFLAGS_RELEASE_SAFE= -O3 
#APPLE_CXXFLAGS_RELEASE_SAFE= -O3 -fno-inline -fcoalesce -fcoalesce-templates

CXXFLAGS_RELEASE = $(OS_WINDOWS? $(INLINE_VC6_FIX_FLAGS_RELEASE) : $(CXXFLAGS_RELEASE) )
CXXFLAGS_RELEASE = $(OS_LINUX? $(CXXFLAGS_RELEASE_SAFE) : $(CXXFLAGS_RELEASE)
#CXXFLAGS_RELEASE = $(OS_MACOSX? $(APPLE_CXXFLAGS_RELEASE_SAFE) : $(CXXFLAGS_RELEASE) )



SOURCES=\
	$(CLAM_PATH)/test/UnitTests/cppUnitHelperTest.cxx \
	$(CLAM_PATH)/test/UnitTests/FactoryTest/FactoryTest.cxx \
	$(CLAM_PATH)/test/UnitTests/FactoryTest/FactoryRegistratorTest.cxx \
	$(CLAM_PATH)/test/UnitTests/FactoryTest/ExternalRegistrators.cxx \
	$(CLAM_PATH)/test/UnitTests/FactoryTest/FactoryRegistryTest.cxx \
	$(CLAM_PATH)/src/Processing/DefaultProcessingFactoryRegistration.cxx \
	$(CLAM_PATH)/test/UnitTests/ProcessingBaseTests/ProcessingTest.cxx \
	$(CLAM_PATH)/test/UnitTests/ProcessingsTests/AutoPannerTest.cxx \
	$(CLAM_PATH)/test/UnitTests/ProcessingDataTests/SpectrumConversionsTest.cxx \	
	$(CLAM_PATH)/test/UnitTests/NonComponentData/TextTest.cxx \
	$(CLAM_PATH)/test/UnitTests/NonComponentData/ComplexTest.cxx \
	$(CLAM_PATH)/test/UnitTests/NonComponentData/PolarTest.cxx \
	$(CLAM_PATH)/test/UnitTests/NonComponentData/PointTest.cxx \
	$(CLAM_PATH)/test/UnitTests/NonComponentData/EnumTest.cxx \
	$(CLAM_PATH)/test/UnitTests/NonComponentData/FlagsTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DynamicTypeTests/DummyDynamicTypes.cxx \
	$(CLAM_PATH)/test/UnitTests/DynamicTypeTests/DynamicTypeBasicTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DynamicTypeTests/DynamicTypeAdvancedTest.cxx \
	$(CLAM_PATH)/test/UnitTests/StandardTests/ArrayTest.cxx \
	$(CLAM_PATH)/test/UnitTests/StandardTests/BPFTest.cxx \
	$(CLAM_PATH)/test/UnitTests/StandardTests/ArrayToBPFCnvTest.cxx \
	$(CLAM_PATH)/test/UnitTests/StandardTests/SearchArrayTest.cxx \
	$(CLAM_PATH)/test/UnitTests/ToolsTests/AudioFileTest.cxx \
	$(CLAM_PATH)/test/UnitTests/ControlsTests/ControlsTest.cxx \
	$(CLAM_PATH)/test/UnitTests/VisualizationTests/FundamentalAdapterTest.cxx \
	$(CLAM_PATH)/test/UnitTests/FlowControlTests/NetworkTest.cxx \
 	$(CLAM_PATH)/test/UnitTests/FlowControlTests/NetworkSerializationTest.cxx \
	$(CLAM_PATH)/test/UnitTests/FlowControlTests/TestsAudioPorts.cxx \
	$(CLAM_PATH)/test/UnitTests/FlowControlTests/TestsPhantomBufferStream.cxx \
	$(CLAM_PATH)/test/UnitTests/FlowControlTests/TestsPortsRegionsInteraction.cxx \
	$(CLAM_PATH)/test/UnitTests/FlowControlTests/TestsRandomStream.cxx \
	$(CLAM_PATH)/test/UnitTests/FlowControlTests/TestsRegions.cxx \
	$(CLAM_PATH)/test/UnitTests/FlowControlTests/TestsStlBasedStream.cxx \
	$(CLAM_PATH)/test/UnitTests/FlowControlTests/TestsStlVector.cxx \
	$(CLAM_PATH)/test/UnitTests/FlowControlTests/TestsStream.cxx \
	$(CLAM_PATH)/test/UnitTests/StandardTests/StatsTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/AudioDescriptorsTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/SpectralDescriptorsTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/SpectralPeakDescriptorsTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/DescriptionXmlTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/DescriptionDataPoolTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/ScopePoolTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/AttributePoolTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/DescriptionScopeTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/DescriptionSchemeTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/HookTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/IndirectBindingTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/ExtractorTest.cxx \
	$(CLAM_PATH)/test/UnitTests/DescriptorsTests/ProofOfConceptTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/XmlWriteContextTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/XmlScopedTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/LibXmlDomWriterTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/LibXmlDomReaderTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/LibXmlDomReadingContextTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/LibXmlDomDocumentHandlerTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/XercesDomWriterTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/XercesDomReaderTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/XercesDomDocumentHandlerTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/XercesDomReadingContextTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/XmlMockUpObjectsTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/ClamObjects2XercesDomTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/XercesDom2ClamObjectsTest.cxx \
	$(CLAM_PATH)/test/UnitTests/XMLAdaptersTests/AdaptersTest.cxx \
	$(CLAM_PATH)/draft/Cuidado/test/PitchTest.cxx \
	$(CLAM_PATH)/draft/Cuidado/test/FundamentalFrequencyHistogramTest.cxx \
	$(TEST_RUNNER) \

# broken:
#	$(CLAM_PATH)/test/UnitTests/FactoryTest/PolymorphicTest.cxx \


