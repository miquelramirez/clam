#####################################################################
# Default test, to test $$package
#
# source: $$filename 
#####################################################################
failure=no
if test $found_$$package_esc
then
	old_CXXFLAGS=$CXXFLAGS
	old_LDFLAGS=$LDFLAGS
	for tmp in $include_dirs_$$package_esc
	  do
	  CXXFLAGS="$CXXFLAGS -I$tmp"
	done
	for tmp in $lib_dirs_$$package_esc
	  do
	  LDFLAGS="$LDFLAGS -L$tmp"
	done
	for tmp in $libs_$$package_esc
	  do
	  LDFLAGS="$LDFLAGS -l$tmp"
	done
	AC_MSG_CHECKING([compiling, linking and running with $$package])
	AC_RUN_IFELSE(
	    [
		AC_LANG_SOURCE(
		    [[
			    $$source{$$package}
			    ]])	
		],[
		AC_MSG_RESULT(ok)
		],[
			AC_MSG_RESULT(failed)
			failure=yes
		]
	)
	CXXFLAGS=$old_CXXFLAGS
	LDFLAGS=$old_LDFLAGS
else
	failure=yes
fi
if test x$failure = xyes
then
	AC_MSG_FAILURE([
Configure-checks for $$package failed.
Please check the configure output to see which checks failed, and the
config.log file for more details.
Note that you can disable the use of $$package altogether, running configure
with the
  --without-$$package
option.
])
fi
#####################################################################

