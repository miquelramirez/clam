<html>
<head>
<title> Editing: Piano Roll Mode</title>
</head>
<body>
<font face="Verdana" size="5" color="#800000"><b>Editing in Piano Roll Mode</b></font>
<br><br>

<font face="Verdana" color = "#000000" size="4">
The following figure shows the elements available for editing in the Piano Roll mode:
<br>
<p align="center"><img border="0" src="pics/pr_edit1.png" width="400" height="379"></p>

<p><br>
The <b>scroll bar</b> is used to move back and forth along the audio signal. Clicking on the arrow<br>
to the right of the scroll bar advances the screen 0.2 seconds along the signal, while clicking<br> 
on the arrow to the left of the scroll bar reverses 0.2 seconds.<br>

Clicking on the area of the scroll bar which is <b>not</b> occupied by the slider will move the screen<br> 
forward or back by 1 second, depending on whether you have clicked to the right or the left<br> 
of the slider.<br>

Finally, it is possible to move along the audio signal by manipulating the slider directly with<br>
the mouse and moving it to the right or to the left.

<br><br>
The <b>display area</b>, shows the data obtained in the analysis vs the estimated values from the<br> 
segmentation process.  The upper display shows the data from the analysis.  It is possible to<br> 
change between the different data types using the buttons to the left of the display.<br>

The larger lower display contains the piano roll view.  This view shows the notes from the<br>
melody within rectangles of a particular colour.  The colour is determined by the value of the<br>
octave pertaining to each note.<br>
<br>
• <b>Audio</b>.<br>
&nbsp;&nbsp;- Original signal.<br>
&nbsp;&nbsp;- Energy.<br>
&nbsp;&nbsp;- Fundamental.<br>
• <b>Piano Roll.</b><br>
<br>
The <b>piano roll</b> is represented by a matrix 12 x n (12 rows by n columns).  The 12 rows<br> 
represent the 12 semitones of the chromatic scale, and the number of columns is determined<br> 
by the duration of the signal. Each column represents 1 second.  For more information about<br> 
the representation of octaves see
<font face="Verdana, Arial, Helvetica, sans-serif" size="4" color="#008800">
<a href="octave.htm"> Representation of octaves</a></font>.<br>
<br>
If you click and hold the left mouse button over the beginning or end time of a note (the<br> 
red vertical lines), the cursor will change shape to a horizontal arrow indicating that the<br> 
limit can be moved to the left or the right.  To change the length of the note, hold the left<br> 
button down and move the mouse to the left or right.  Release the mouse button and the<br> 
cursor will return to the original shape and the beginning/end of the note remains in the<br> 
desired position.<br>

When modifying the length of a note it is possible to link or eliminate notes, or both<br> 
functions at the same time depending on the circumstances.

<br>
<p align="center"><img border="0" src="pics/pr_edit2.png" width="400" height="192"></p>

<p><br>
Editing the start or end time of a note causes a change in the length of the rectangle<br> 
associated with that note. If you join the beginning and end times of a note, the note<br> 
will be eliminated from the melody.<br> 

When a beginning/end time being edited is joined to the start or end point of a different<br>
note, the notes will become linked.  The previous figure shows and example of several linked<br>
and unlinked notes. 

<br><br>
The <b>panel</b> shows information about the note being edited.  If there is no note being<br> 
edited then the fields will not contain any information.  If any modifications are made, the<br> 
<b>Save</b>, button is activated which provides the option of saving the changes.

<br>
<p align="center"><img border="0" src="pics/pr_edit3.png" width="403" height="62"></p>

<p><br>
The first line of labels shows the MIDI values (key and velocity) of the note being edited.<br> 

The second line of labels shows information about the amplitude, energy and pitch based on<br>
the data obtained from the spectral analysis.<br>

The third line of labels shows the start and end times of the note (t1 and t2) and its duration.

<br><br>
By pushing the right mouse button over the display area a pop-up menu appears.  This<br>
menu offers the option to <b>Save</b> current changes, as well as the option to undo the latest<br>
action (<b>Undo</b>), or the option to discard all changes back to the last time the melody was<br> 
saved (<b>Discard</b>).

<br>
<p align="center"><img border="0" src="pics/popup_menu.png" width="100" height="86"></p>

<p><br>
Using the <b>Undo</b> option it is possible to undo a total of 20 actions made after the previous<br>
<i>save</i>.

<br><br>
The piano roll view is synchronised with the 
<font face="Verdana, Arial, Helvetica, sans-serif" size="4" color="#008800">
<a href="segmentation_view.htm">segmentation view</a></font>
, so any actions taken in<br> 
this view will be reflected in the other.
</font>
</body>
</html>
